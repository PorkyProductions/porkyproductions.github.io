{"version":3,"file":"loopOnce.ab78d561.js","sources":["../../node_modules/svelte-typewriter/modes/loopOnce.js"],"sourcesContent":["import { animationSetup } from '../helpers/animationSetup'\nimport { writeEffect } from '../helpers/writeEffect'\nimport { typingInterval } from '../helpers/typingInterval'\nimport { unwriteEffect } from '../helpers/unwriteEffect'\nimport { runOnEveryParentUntil } from '../helpers/runOnEveryParentUntil'\n\nconst loopOnce = async (node, props) => {\n\tconst { options, elements } = animationSetup(node, props)\n\n\tfor (const element of elements) {\n\t\tconst { currentNode, text } = element\n\n\t\tawait writeEffect(element, options)\n\t\tconst textWithUnescapedAmpersands = text.replaceAll('&', '&amp;')\n\n\t\tconst fullyWritten = currentNode.innerHTML === textWithUnescapedAmpersands\n\n\t\tif (fullyWritten) {\n\t\t\toptions.dispatch('done')\n\t\t\tawait typingInterval(options.wordInterval)\n\n\t\t\tconst isLastElement = elements.indexOf(element) === elements.length - 1\n\n\t\t\tif (!isLastElement) {\n\t\t\t\tawait unwriteEffect(currentNode, options)\n\t\t\t\trunOnEveryParentUntil(currentNode, options.parentElement, element => {\n\t\t\t\t\tcurrentNode === element\n\t\t\t\t\t\t? element.classList.remove('typing')\n\t\t\t\t\t\t: element.classList.remove('finished-typing')\n\t\t\t\t})\n\t\t\t}\n\n\t\t\trunOnEveryParentUntil(currentNode, options.parentElement, element => {\n\t\t\t\tconst cursorHasTimeout = typeof options.keepCursorOnFinish === 'number'\n\t\t\t\tcursorHasTimeout &&\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\telement.classList.replace('typing', 'finished-typing')\n\t\t\t\t\t}, options.keepCursorOnFinish)\n\t\t\t})\n\t\t}\n\t}\n}\n\nexport default loopOnce\n"],"names":["loopOnce","node","props","options","elements","animationSetup","element","currentNode","text","writeEffect","textWithUnescapedAmpersands","typingInterval","unwriteEffect","runOnEveryParentUntil"],"mappings":"2LAMK,MAACA,EAAW,MAAOC,EAAMC,IAAU,CACvC,KAAM,CAAE,QAAAC,EAAS,SAAAC,CAAQ,EAAKC,EAAeJ,EAAMC,CAAK,EAExD,UAAWI,KAAWF,EAAU,CAC/B,KAAM,CAAE,YAAAG,EAAa,KAAAC,CAAI,EAAKF,EAE9B,MAAMG,EAAYH,EAASH,CAAO,EAClC,MAAMO,EAA8BF,EAAK,WAAW,IAAK,OAAO,EAE3CD,EAAY,YAAcG,IAG9CP,EAAQ,SAAS,MAAM,EACvB,MAAMQ,EAAeR,EAAQ,YAAY,EAEnBC,EAAS,QAAQE,CAAO,IAAMF,EAAS,OAAS,IAGrE,MAAMQ,EAAcL,EAAaJ,CAAO,EACxCU,EAAsBN,EAAaJ,EAAQ,cAAeG,GAAW,CACpEC,IAAgBD,EACbA,EAAQ,UAAU,OAAO,QAAQ,EACjCA,EAAQ,UAAU,OAAO,iBAAiB,CAClD,CAAK,GAGFO,EAAsBN,EAAaJ,EAAQ,cAAeG,GAAW,CAC3C,OAAOH,EAAQ,oBAAuB,UAE9D,WAAW,IAAM,CAChBG,EAAQ,UAAU,QAAQ,SAAU,iBAAiB,CAC3D,EAAQH,EAAQ,kBAAkB,CAClC,CAAI,EAEF,CACF"}